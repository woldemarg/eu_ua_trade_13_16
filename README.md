## Анализ изменений в торговле между Украиной и ЕС в 2013-2016гг.
1. Сбор данных с помощью **get_data.R**
Статистику загружаем чере API-интерфейс портала [comtrade.un.org](https://comtrade.un.org/api/swagger/ui/index#!/Data/Data_GetData).
Особенности загрузки данных: на момент анализа статистика за 2016 год доступна только на в виде ежемесячных выборок; интерфейс имеет свои ограничения по объему выгрузки данных в одном запросе и по количеству обращений в час (до 100)

2. Расчет индекса цен в файле **calc_index.R**
Методика расчет индексов цен во внешнейторговле  Госстата Украины –[здесь](https://ukrstat.org/uk/metod_polog/metod_doc/2005/419/metod.htm)
Таблицы цепных индексов за весь исследуемый период на Госстате Украины – [здесь](http://www.ukrstat.gov.ua/operativ/operativ2016/zd/in_fiz/in_fiz_u/in_fiz_1316_u.htm)
Описание и примеры расчетов для перехода к сопоставимым ценам – [здесь](http://www.aup.ru/books/m163/3_2_7.htm)

3. Дополнительные расчеты и преобразование формата данных в файле **data_wrangl.R**
Преобразование данных в форматы, пригодные для последующего создания графики. На этом этапе рассчитываем средние значения для ЕС и отсееваем страны с минимальной долей в товарообороте по 2016 г. из-за высокой волатильности их показателей. Объединение товаров в укрупненные групы в файле **сodes.csv**. Приемы группировки позаимствованы из работы ["Таможенный союз Беларуси, Казахстана и России: создание и отклонение торговли в Центральной Азии в 2010–2011 гг.", стр. 20](http://www.ucentralasia.org/Content/downloads/UCA-IPPA-WP12-TradeCreationAndDiversion-Rus.pdf)

4. Создание графики по товарообороту **scatterplot.R**
Идея размещения стран в координатной сетке "экспорт/импорт" и использование log-осей  описаны [здесь]( http://novyden.blogspot.com/2017/06/logarithmic-scale-explained-with-us.html?m=1). Особенность графика – для создания эффекта градиента каждая линия разбита на множество отрезков, каждый со своим alpha-уровнем. Пример из книги [Hadley Wickham "ggplot2", стр. 52-53](http://ms.mcmaster.ca/~bolker/misc/ggplot2-book.pdf)
![turnover](https://raw.githubusercontent.com/woldemarg/eu_ua_trade_13_16/master/turnover_change.png "Проект графики по изменению товарооборота за 2013-2016гг.")

5. Создание графики по экспорту **step_chart.R**
Идея и трюк работы с geom_step() на примере анализа [Температуры в Киеве](http://textura.in.ua/post/162910213800/kyivweatherhistorybarcode)
![export](https://raw.githubusercontent.com/woldemarg/eu_ua_trade_13_16/master/export_change.png "Проект графики по изменение экспорта по товарнім группам за 2013-2016гг.")

>П.С. Файл **data_wrangl.R** обращается к **get_data.R**, а тот, в свою очередь, выполняет **calc_index.R**. Результатом работы **data_wrangl.R** являются две таблицы для создания гарфики. Файлы **scatterplot.R** и **step_chart.R** обращаются к **data_wrangl.R**, поэтому можно начинать работы прямо с них.

>П.П.С. Подробные комментарии - см. прямо в исходном коде
